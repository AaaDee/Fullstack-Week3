{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","filter","handleFilterChange","value","onChange","PersonForm","addName","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","type","Persons","persons","setPersons","setMessage","filteredPersons","person","name","includes","map","number","DeleteButton","onClick","window","confirm","find","p","phonebookService","setTimeout","Notification","message","className","ErrorNotification","App","useState","setNewName","setNewNumber","setFilter","errorMessage","setErrorMessage","useEffect","event","console","log","target","preventDefault","updatedPerson","catch","error","returnedPerson","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3adcb875.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n\r\n}\r\n\r\nexport default {getAll, create, update, deletePerson}","import React, { useState, useEffect } from 'react'\nimport phonebookService from './services/persons'\nimport './index.css'\n\nconst Filter = ({filter, handleFilterChange}) => {\n  return(\n    <div>filter shown with <input value={filter} onChange={handleFilterChange}/></div>\n  )\n}\n\nconst PersonForm = ({addName, newName, newNumber, handleNameChange, handleNumberChange}) => {\n  return(\n    <form onSubmit = {addName}>\n        <div>name: <input value={newName} onChange={handleNameChange}/></div>\n        <div>number: <input value={newNumber} onChange={handleNumberChange}/></div>\n        <div><button type=\"submit\">add</button></div>\n    </form>\n  )\n}\n\nconst Persons = ({persons, filter, setPersons, setMessage}) => {\n  const filteredPersons = persons.filter(person => person.name.includes(filter))\n  \n  return(\n    <ul>\n      {filteredPersons.map(person => \n        <li key = {person.name}>\n          {person.name} {person.number} <DeleteButton person = {person} persons = {persons} setPersons = {setPersons} setMessage = {setMessage}/>\n        </li>\n      )}\n    </ul>\n  )\n}\n\nconst DeleteButton = ({person, persons, setPersons, setMessage}) => {\n  const SendDeleteRequest = () => {\n    const result = window.confirm(`Delete ${person.name}`);\n    if (!result) return\n\n    const id = persons\n      .find(p => p.name === person.name)\n      .id\n    \n\n    phonebookService\n      .deletePerson(id)\n      .then(() => {\n        setPersons(persons.filter(p => p.id !== id))\n        setMessage(\n          `Deleted ${person.name}`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n  }\n\n  \n  return(\n    <button onClick = {SendDeleteRequest}>\n      delete\n    </button>\n  )\n}\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"message\">\n      {message}\n    </div>\n  )\n}\n\nconst ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ message, setMessage ] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n  useEffect(() => {\n    phonebookService\n      .getAll()\n      .then(persons => {\n        setPersons(persons)\n      })\n  }, [])\n\n\n  const addName = (event) => {\n    event.preventDefault()\n    \n    const person = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (persons.map(person => person.name).includes(newName)) {\n      const result = window.confirm(`update ${person.name}`)\n      if (!result) return\n\n      const id = persons\n      .find(p => p.name === person.name)\n      .id\n\n      phonebookService\n      .update(id, person)\n      .then(updatedPerson => {\n        setPersons(persons.map(p => p.id !== id ? p : updatedPerson))\n        setNewName('')\n        setNewNumber('')\n        setMessage(\n          `Updated ${person.name}`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error =>{\n        setErrorMessage(`${person.name} has already been deleted`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n\n    } else {\n      phonebookService\n        .create(person)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setMessage(\n            `Added ${person.name}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n      })\n    }\n  }\n  \n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setFilter(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <ErrorNotification message={errorMessage} />\n      <Notification message={message} />\n      <Filter filter = {filter} handleFilterChange = {handleFilterChange}/>\n      <h2>Add a new</h2>\n      <PersonForm addName = {addName} newName = {newName} newNumber = {newNumber} handleNameChange = {handleNameChange} handleNumberChange = {handleNumberChange}/>\n      <h2>Numbers</h2>\n      <Persons persons = {persons} filter = {filter} setPersons = {setPersons} setMessage = {setMessage}/>\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}